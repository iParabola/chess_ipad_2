<view class="xinyi-content data-v-5c8a2998"><view class="rightBtn data-v-5c8a2998"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="btnView data-v-5c8a2998" bindtap="__e">记录明细</view><view data-event-opts="{{[['tap',[['getRealTimeScore',['$event']]]]]}}" class="btnView data-v-5c8a2998" bindtap="__e">实时得分</view><view data-event-opts="{{[['tap',[['getJudgeTable',['$event']]]]]}}" class="btnView data-v-5c8a2998" bindtap="__e">指令录入</view><view data-event-opts="{{[['tap',[['getJudgeResult',['$event']]]]]}}" class="btnView data-v-5c8a2998" bindtap="__e">裁决结果</view><block wx:if="{{isAdmin}}"><view data-event-opts="{{[['tap',[['getTableScoreFinal',['$event']]]]]}}" class="btnView data-v-5c8a2998" bindtap="__e">推演得分</view></block><view data-event-opts="{{[['tap',[['getFinalSummary',['$event']]]]]}}" class="btnView data-v-5c8a2998" bindtap="__e">推演汇总</view></view><block wx:if="{{showChessButtonInfo.visible}}"><view class="newcontextmenu data-v-5c8a2998" style="{{'left:'+(showChessButtonInfo.left+'px')+';'+('top:'+(showChessButtonInfo.top+'px')+';')}}" name="newcontextmenu"><view class="score-btn-view data-v-5c8a2998"><block wx:if="{{$root.m0}}"><uv-text vue-id="65a2fc52-1" prefixIcon="empty-history" iconStyle="{{({color:'#ffffff',size:18})}}" text="攻击" color="#ffffff" size="{{18}}" data-event-opts="{{[['^click',[['attack']]]]}}" bind:click="__e" class="data-v-5c8a2998" bind:__l="__l"></uv-text></block><block wx:if="{{game.roundPeriod==2}}"><uv-text vue-id="65a2fc52-2" prefixIcon="empty-history" iconStyle="{{({color:'#ffffff',size:18})}}" text="移动" color="#ffffff" size="{{18}}" data-event-opts="{{[['^click',[['move']]]]}}" bind:click="__e" class="data-v-5c8a2998" bind:__l="__l"></uv-text></block><block wx:if="{{game.roundPeriod==2}}"><uv-text vue-id="65a2fc52-3" prefixIcon="empty-history" iconStyle="{{({color:'#ffffff',size:18})}}" text="隐藏" color="#ffffff" size="{{18}}" data-event-opts="{{[['^click',[['hide']]]]}}" bind:click="__e" class="data-v-5c8a2998" bind:__l="__l"></uv-text></block></view></view></block><uv-modal vue-id="65a2fc52-4" showCancelButton="{{false}}" title="结算" data-ref="showSettlement" data-event-opts="{{[['^cancel',[['e1']]],['^confirm',[['e2']]]]}}" bind:cancel="__e" bind:confirm="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{game.settlement}}"><view class="data-v-5c8a2998"><view class="_div data-v-5c8a2998">{{"我方攻击分数:"+game.settlement.selfAttackScore}}</view><view class="_div data-v-5c8a2998">{{"我方筛子分数:"+game.settlement.selfDiceScore}}</view><view class="_div data-v-5c8a2998">{{"对方攻击分数:"+game.settlement.targetAttackScore}}</view><view class="_div data-v-5c8a2998">{{"对方筛子分数:"+game.settlement.targetDiceScore}}</view></view></block></uv-modal><uv-modal vue-id="65a2fc52-5" title="结果" data-ref="showResult" data-event-opts="{{[['^confirm',[['gameOver']]]]}}" bind:confirm="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="data-v-5c8a2998"><block wx:if="{{game.result==1&&isUser}}"><view class="_div data-v-5c8a2998">获胜</view></block><block wx:if="{{game.result==2&&isUser}}"><view class="_div data-v-5c8a2998">失败</view></block><block wx:if="{{game.result==0&&isUser}}"><view class="_div data-v-5c8a2998">平局</view></block><block wx:if="{{!isUser}}"><view class="_div data-v-5c8a2998">{{game.resultStr}}</view></block></view></uv-modal><uv-modal vue-id="65a2fc52-6" showCancelButton="{{true}}" title="确认" content="是否攻击该位置" width="200rpx" data-ref="attackConfirm" data-event-opts="{{[['^cancel',[['e3']]],['^confirm',[['attackPoint']]]]}}" bind:cancel="__e" bind:confirm="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></uv-modal><uv-modal vue-id="65a2fc52-7" showCancelButton="{{true}}" title="确认" width="200rpx" content="是否移动到该位置" data-ref="moveConfirm" data-event-opts="{{[['^cancel',[['e4']]],['^confirm',[['movePoint']]]]}}" bind:cancel="__e" bind:confirm="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></uv-modal><uv-modal vue-id="65a2fc52-8" showCancelButton="{{false}}" showConfirmButton="{{false}}" width="200rpx" title="取消棋子" data-ref="showDown" class="data-v-5c8a2998 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="data-v-5c8a2998"><u-button bind:click="__e" vue-id="{{('65a2fc52-9')+','+('65a2fc52-8')}}" data-event-opts="{{[['^click',[['cancelPiece']]]]}}" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">取消</u-button></view></uv-modal><uv-modal vue-id="65a2fc52-10" showCancelButton="{{false}}" showConfirmButton="{{false}}" title="棋子选着" data-ref="showSelPiece" class="data-v-5c8a2998 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="data-v-5c8a2998"><view style="display:flex;flex-wrap:wrap;justify-content:flex-start;" class="_div data-v-5c8a2998"><block wx:for="{{game.userPiece}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{!item.isAdd&&item.chessPiecesCampId==campId}}"><view data-event-opts="{{[['tap',[['selPiece',['$0'],[[['game.userPiece','',index]]]]]]]}}" style="width:77rpx;height:77rpx;" bindtap="__e" class="_div data-v-5c8a2998"><uv-image style="margin-left:11rpx;" vue-id="{{('65a2fc52-11-'+index)+','+('65a2fc52-10')}}" src="{{item.chessPiecesCover}}" width="55upx" height="55upx" class="data-v-5c8a2998" bind:__l="__l"></uv-image><view style="text-align:center;" class="_div data-v-5c8a2998">{{item.chessPiecesName}}</view></view></block></block></view></view></uv-modal><view class="top__view data-v-5c8a2998"><xinyi-steps vue-id="65a2fc52-12" options="{{stageOptions}}" active="{{stageActive}}" arrowRight="{{true}}" canClick="{{true}}" clickType="stage" statusDesc="{{statusDesc}}" isAdmin="{{isAdmin}}" statusIndex="{{statusIndex}}" class="data-v-5c8a2998" bind:__l="__l"></xinyi-steps><view class="dice-toolbar__veiw data-v-5c8a2998"><block wx:if="{{game.nowRound==0&&game.isDeplaoy&&isUser}}"><button class="stage-over__btn data-v-5c8a2998" type="primary" data-event-opts="{{[['tap',[['endDeployFunc']]]]}}" bindtap="__e">结束部署</button></block><block wx:if="{{isUser&&game.nowRound!=0&&userStageNotSubmit}}"><button class="stage-over__btn data-v-5c8a2998" type="primary" data-event-opts="{{[['tap',[['endRoundFunc']]]]}}" bindtap="__e">提交</button></block><block wx:if="{{isAdmin&&roundEnd}}"><button class="stage-over__btn data-v-5c8a2998" type="primary" data-event-opts="{{[['tap',[['judge']]]]}}" bindtap="__e">裁决</button></block></view><view class="avatar-view data-v-5c8a2998"><uv-avatar vue-id="65a2fc52-13" text="{{avatarText}}" fontSize="14" bg-color="#7f7f00" color="#ffffff" class="data-v-5c8a2998" bind:__l="__l"></uv-avatar></view></view><view class="main__view data-v-5c8a2998" style="{{(cssVars)}}"><view class="map__view data-v-5c8a2998"><vue-draggable-resizable class="map data-v-5c8a2998" vue-id="65a2fc52-14" bind:__l="__l" vue-slots="{{['default']}}"><image class="bg _img data-v-5c8a2998" src="{{$root.m1}}"></image><view class="bgCell data-v-5c8a2998"><block wx:for="{{mapList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="data-v-5c8a2998"><view style="display:flex;flex-wrap:nowrap;" class="data-v-5c8a2998"><block wx:for="{{item}}" wx:for-item="h" wx:for-index="idx" wx:key="idx"><view data-event-opts="{{[['tap',[['showOpView',['$event','$0',index,idx],[[['mapList','',index],['','',idx]]]]]]]}}" class="block data-v-5c8a2998" bindtap="__e"><view class="block_border data-v-5c8a2998"><view class="statusDesc data-v-5c8a2998" style="font-size:4rpx;">{{h.statusDesc}}</view><block wx:if="{{h.chessPiecesCover}}"><image class="chessImage _img data-v-5c8a2998" src="{{h.chessPiecesCover}}"></image></block><view style="font-size:4rpx;" class="data-v-5c8a2998">{{''+h.chessPiecesNumber+''}}</view></view></view></block></view></view></block></view></vue-draggable-resizable></view></view><uni-drawer vue-id="65a2fc52-15" mode="right" width="{{400}}" data-ref="showActionDesc" class="data-v-5c8a2998 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="scroll-view data-v-5c8a2998" style="padding-right:30px;"><scroll-view class="scroll-view-box data-v-5c8a2998" style="height:80vh;" scroll-y="true"><block wx:for="{{game.actionDescList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-card vue-id="{{('65a2fc52-16-'+index)+','+('65a2fc52-15')}}" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}"><view data-event-opts="{{[['tap',[['cjResult',[index]]]]]}}" bindtap="__e" class="data-v-5c8a2998"><rich-text nodes="{{item}}"></rich-text></view></uni-card></block></scroll-view></view></uni-drawer><uni-drawer vue-id="65a2fc52-17" mode="right" width="{{400}}" data-ref="showRealTimeScore" class="data-v-5c8a2998 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="scroll-view data-v-5c8a2998" style="padding-right:30px;"><uni-table vue-id="{{('65a2fc52-18')+','+('65a2fc52-17')}}" border="{{true}}" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}"><uni-tr class="rowTitle data-v-5c8a2998" vue-id="{{('65a2fc52-19')+','+('65a2fc52-18')}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-td vue-id="{{('65a2fc52-20')+','+('65a2fc52-19')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.firstCampName}}</uni-td><uni-td vue-id="{{('65a2fc52-21')+','+('65a2fc52-19')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">阵营</uni-td><uni-td vue-id="{{('65a2fc52-22')+','+('65a2fc52-19')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.secondCampName}}</uni-td></uni-tr><uni-tr class="rowTitle data-v-5c8a2998" vue-id="{{('65a2fc52-23')+','+('65a2fc52-18')}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-td vue-id="{{('65a2fc52-24')+','+('65a2fc52-23')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.firstScoretype1}}</uni-td><uni-td vue-id="{{('65a2fc52-25')+','+('65a2fc52-23')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">指挥口令规范性</uni-td><uni-td vue-id="{{('65a2fc52-26')+','+('65a2fc52-23')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.secondScoretype1}}</uni-td></uni-tr><uni-tr class="rowTitle data-v-5c8a2998" vue-id="{{('65a2fc52-27')+','+('65a2fc52-18')}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-td vue-id="{{('65a2fc52-28')+','+('65a2fc52-27')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.firstScoretype2}}</uni-td><uni-td vue-id="{{('65a2fc52-29')+','+('65a2fc52-27')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">指挥要素完备性</uni-td><uni-td vue-id="{{('65a2fc52-30')+','+('65a2fc52-27')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.secondScoretype2}}</uni-td></uni-tr><uni-tr class="rowTitle data-v-5c8a2998" vue-id="{{('65a2fc52-31')+','+('65a2fc52-18')}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-td vue-id="{{('65a2fc52-32')+','+('65a2fc52-31')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.firstScoretype3}}</uni-td><uni-td vue-id="{{('65a2fc52-33')+','+('65a2fc52-31')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">打击效果</uni-td><uni-td vue-id="{{('65a2fc52-34')+','+('65a2fc52-31')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.secondScoretype3}}</uni-td></uni-tr><uni-tr class="rowTitle data-v-5c8a2998" vue-id="{{('65a2fc52-35')+','+('65a2fc52-18')}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-td vue-id="{{('65a2fc52-36')+','+('65a2fc52-35')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.firstScoretypeTotal}}</uni-td><uni-td vue-id="{{('65a2fc52-37')+','+('65a2fc52-35')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">总分</uni-td><uni-td vue-id="{{('65a2fc52-38')+','+('65a2fc52-35')}}" align="center" class="data-v-5c8a2998" bind:__l="__l" vue-slots="{{['default']}}">{{realTimeScore.secondScoretypeTotal}}</uni-td></uni-tr></uni-table></view></uni-drawer><final-summary vue-id="65a2fc52-39" dataArray="{{summaryScoreData}}" round="{{chartRound}}" campData="{{campList}}" data-ref="finalSummary" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></final-summary><view class="foot-view data-v-5c8a2998"><xinyi-steps vue-id="65a2fc52-40" options="{{roundOptions}}" active="{{roundActive}}" canClick="{{true}}" clickType="round" arrowRight="{{true}}" campData="{{campList}}" data-event-opts="{{[['^setScore',[['scoreTableShow']]]]}}" bind:setScore="__e" class="data-v-5c8a2998" bind:__l="__l"></xinyi-steps></view><uni-popup vue-id="65a2fc52-41" isMaskClick="{{false}}" maskBackgroundColor="rgba(0,0,0,0.2)" data-ref="popup" class="data-v-5c8a2998 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="dice__veiw data-v-5c8a2998"><block wx:for="{{diceCount}}" wx:for-item="item" wx:for-index="index" wx:key="index"><xinyi-dice vue-id="{{('65a2fc52-42-'+index)+','+('65a2fc52-41')}}" data-ref="{{'dice'+index}}" class="data-v-5c8a2998 vue-ref-in-for" bind:__l="__l"></xinyi-dice></block></view></uni-popup><rule-table vue-id="65a2fc52-43" dataArray="{{ruleArray}}" data-ref="popupRule" data-event-opts="{{[['^maskClick',[['ruleTableMaskClick']]]]}}" bind:maskClick="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></rule-table><blow-effect-table vue-id="65a2fc52-44" dataArray="{{blowEffectList}}" data-ref="blowEffectTable" data-event-opts="{{[['^maskClick',[['blowEffectMaskClick']]]]}}" bind:maskClick="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></blow-effect-table><rule-result vue-id="65a2fc52-45" data="{{historyList}}" data-ref="ruleResult" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></rule-result><score-table vue-id="65a2fc52-46" data="{{campListItem}}" scoreList="{{scoreList}}" data-ref="scoreTable" data-event-opts="{{[['^submitScore',[['submitScore']]]]}}" bind:submitScore="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></score-table><score-table-final vue-id="65a2fc52-47" scoreList="{{finalScoreList}}" data="{{finalData}}" data-ref="scoreTableFinal" data-event-opts="{{[['^submitScore',[['submitScoreFinal']]]]}}" bind:submitScore="__e" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></score-table-final><judge-table vue-id="65a2fc52-48" showInfo="{{judgeTableShowInfo}}" data-ref="judgeTable" class="data-v-5c8a2998 vue-ref" bind:__l="__l"></judge-table></view>