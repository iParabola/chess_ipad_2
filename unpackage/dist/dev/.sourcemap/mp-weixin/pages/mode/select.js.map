{"version":3,"sources":["uni-app:///main.js","webpack:///D:/chess/code/new-wargame-uniapp/pages/mode/select.vue?9ed6","webpack:///D:/chess/code/new-wargame-uniapp/pages/mode/select.vue?8cc9","webpack:///D:/chess/code/new-wargame-uniapp/pages/mode/select.vue?4568","webpack:///D:/chess/code/new-wargame-uniapp/pages/mode/select.vue?fda4","uni-app:///pages/mode/select.vue","webpack:///D:/chess/code/new-wargame-uniapp/pages/mode/select.vue?48ed","webpack:///D:/chess/code/new-wargame-uniapp/pages/mode/select.vue?a7a0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","user","inviteCode","campId","campList","productList","productId","verdictRecordId","userType","typeList","text","value","type","onLoad","methods","to","uni","url","queryProductList","then","item","catch","joinRoom","console","action","queryCampList","chooseCamp","id","chooseProduct"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AACgL;AAChL,gBAAgB,uLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,4WAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAoqB,CAAgB,kqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC6CxrB;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC,WACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;;EACAC;IACAC;MACA;QACA;UACA;UACAC;YACAC;UACA;UACA;QACA;UACA;UACAD;YACAC;UACA;UACA;QACA;UACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;UACA;MAAA;IAEA;IACAC;MAAA;MACA,gCACAC;QACA;UACA;UACA;YACAC;YACAA;UACA;QACA;MACA,GACAC;IACA;IACAC;MAAA;MACAC;MACA,gDACAJ;QACA;UACA;UACA;YACAI;YACA;cAAAC;cAAAjB;YAAA;YAEAS;cACAC;YACA;UACA;YACA;UACA;QACA;MACA,GACAI;IACA;IACAI;MAAA;MACA;QAAAlB;MAAA,GACAY;QACA;QACA;UACAC;UACAA;QACA;QACA;MACA,GACAC;IACA;IACAK;MAAA;MACA;QAAAC;QAAApB;QAAAC;MAAA,GACAW;QACA;UACAH;YACAC,KACA,mCACA,oBACA,sBACA,yBACA,aACA;UACA;QACA;MACA,GACAI;IACA;IACAO;MACAZ;QACAC,yDACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjLA;AAAA;AAAA;AAAA;AAA2xC,CAAgB,itCAAG,EAAC,C;;;;;;;;;;;ACA/yC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/mode/select.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/mode/select.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./select.vue?vue&type=template&id=c71aca02&scoped=true&\"\nvar renderjs\nimport script from \"./select.vue?vue&type=script&lang=js&\"\nexport * from \"./select.vue?vue&type=script&lang=js&\"\nimport style0 from \"./select.vue?vue&type=style&index=0&id=c71aca02&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c71aca02\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mode/select.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select.vue?vue&type=template&id=c71aca02&scoped=true&\"","var components\ntry {\n  components = {\n    xinyiNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/xinyi-nav-bar/components/xinyi-nav-bar/xinyi-nav-bar\" */ \"@/uni_modules/xinyi-nav-bar/components/xinyi-nav-bar/xinyi-nav-bar.vue\"\n      )\n    },\n    uvModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uv-modal/components/uv-modal/uv-modal\" */ \"@/uni_modules/uv-modal/components/uv-modal/uv-modal.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uniDataSelect: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-data-select/components/uni-data-select/uni-data-select\" */ \"@/uni_modules/uni-data-select/components/uni-data-select/uni-data-select.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"xinyi-content\">\n        <xinyi-nav-bar title=\"模式选择\" right-text=\"退出登录\"></xinyi-nav-bar>\n        <view class=\"mode-btn__view\" v-if=\"user.permission === 'admin'\">\n            <view class=\"new-game__view\" @click=\"to(0)\">\n                <text>推演大厅</text>\n            </view>\n            <view class=\"review__view\" @click=\"to(1)\">\n                <text>历史复盘</text>\n            </view>\n        </view>\n        <view class=\"mode-btn__view\" v-else>\n            <view class=\"new-game__view\" @click=\"to(2)\">\n                <text>立即推演</text>\n            </view>\n            <view class=\"observe__view\" @click=\"to(3)\">\n                <text>推演大厅</text>\n            </view>\n            <view class=\"review__view\" @click=\"to(1)\">\n                <text>历史复盘</text>\n            </view>\n        </view>\n        <uv-modal width=\"300\" ref=\"room\" @confirm=\"joinRoom()\" title=\"加入房间\">\n            <view>\n                <uni-easyinput v-model=\"inviteCode\" placeholder=\"请输入房间号\"></uni-easyinput>\n            </view>\n        </uv-modal>\n        <uv-modal width=\"300\" ref=\"camp\" @confirm=\"chooseCamp()\">\n            <view class=\"popup_view\">\n                <view>请选择阵营：</view>\n                <uni-data-select v-model=\"campId\" :localdata=\"campList\"></uni-data-select>\n                <view>请选择角色：</view>\n                <uni-data-select v-model=\"userType\" :localdata=\"typeList\"></uni-data-select>\n            </view>\n        </uv-modal>\n        <uv-modal width=\"300\" ref=\"product\" @confirm=\"chooseProduct()\">\n            <view class=\"popup_view\">\n                <view>请选择产品：</view>\n                <uni-data-select v-model=\"productId\" :localdata=\"productList\"></uni-data-select>\n            </view>\n        </uv-modal>\n    </view>\n</template>\n\n<script>\nimport { joinRoom, queryCampList, chooseCamp } from '@/api/room.js';\nimport { initWebSocket, sendMsg } from '@/api/websocket.js';\nimport { queryArmoryList } from '@/api/product.js';\nexport default {\n    data() {\n        return {\n            user: {},\n            inviteCode: '',\n            campId: '',\n            campList: '', // 阵营\n            productList: [], //兵棋产品\n            productId: '',\n            verdictRecordId: '',\n            userType: 0,\n            typeList: [\n                {\n                    text: '控制员',\n                    value: 1\n                },\n                {\n                    text: '裁决员',\n                    value: 2\n                }\n            ],\n            type: ''\n        };\n    },\n    onLoad() {\n        //initWebSocket();\n        this.user = uni.getStorageSync('user');\n        //this.queryProductList();\n    },\n    methods: {\n        to(index) {\n            switch (index) {\n                case 0:\n                    // 兵棋列表\n                    uni.navigateTo({\n                        url: '/pages/product/list'\n                    });\n                    break;\n                case 1:\n                    // 复盘\n                    uni.navigateTo({\n                        url: '/pages/verdict/record'\n                    });\n                    break;\n                case 2:\n                    // 开始推演\n                    this.type = 'battle';\n                    this.$refs.room.open();\n                    break;\n                case 3:\n                    // 观战\n                    // this.type = 'watch';\n                    // this.$refs.room.open();\n                    this.queryProductList();\n                    this.$refs.product.open();\n                    break;\n                default:\n                    break;\n            }\n        },\n        queryProductList() {\n            queryArmoryList()\n                .then((res) => {\n                    if(res.data.code == 200){\n                        this.productList = res.data.rows;\n                        this.productList.forEach((item) => {\n                            item.text = item.productName;\n                            item.value = item.id;\n                        });\n                    }\n                })\n                .catch((err) => {});\n        },\n        joinRoom() {\n            console.log(this.inviteCode);\n            joinRoom(this.inviteCode, this.type)\n                .then((res) => {\n                    if (res.data.code == 200) {\n                        this.verdictRecordId = res.data.msg;\n                        if (this.type == 'watch') {\n                            console.log('res: ', res.data.msg);\n                            sendMsg(JSON.stringify({ action: 'watchJoinRoom', verdictRecordId: this.verdictRecordId }));\n\n                            uni.navigateTo({\n                                url: '/pages/wargame/index-v2?verdictRecordId=' + this.verdictRecordId + '&type=watch'\n                            });\n                        } else {\n                            this.queryCampList();\n                        }\n                    }\n                })\n                .catch((err) => {});\n        },\n        queryCampList() {\n            queryCampList({ verdictRecordId: this.verdictRecordId })\n                .then((res) => {\n                    this.campList = res.data.data;\n                    this.campList.forEach((item) => {\n                        item.text = item.name;\n                        item.value = item.id;\n                    });\n                    this.$refs.camp.open();\n                })\n                .catch((err) => {});\n        },\n        chooseCamp() {\n            chooseCamp({ id: this.campId, verdictRecordId: this.verdictRecordId, userType: this.userType })\n                .then((res) => {\n                    if (res.data.code == 200) {\n                        uni.navigateTo({\n                            url:\n                                '/pages/room/create?inviteCode=' +\n                                this.inviteCode +\n                                '&verdictRecordId=' +\n                                this.verdictRecordId +\n                                '&campId=' +\n                                this.campId\n                        });\n                    }\n                })\n                .catch((err) => {});\n        },\n        chooseProduct(){\n            uni.navigateTo({\n                url: '/pages/verdict/list?productId=' + this.productId\n                    + '&isAdmin=' + false + '&isUser=' + true\n            });\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@font-face {\n    font-family: '仓耳渔阳体 W05';\n    font-weight: 400;\n    src: url('@/static/font/mode.woff2') format('woff2');\n    font-display: swap;\n}\n.title__view {\n    font-size: $uni-font-size-title;\n}\n.mode-btn__view {\n    display: flex;\n    justify-content: space-around;\n    // 防止3个模式，宽度压缩\n    min-width: 144vh;\n    height: 80vh;\n    margin-top: 10rpx;\n    .new-game__view,\n    .observe__view,\n    .review__view {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        writing-mode: vertical-lr;\n        width: 48vh;\n        height: 70vh;\n        margin: 10rpx;\n        box-shadow: 0 0 10px $uni-border-color;\n        font-size: $uni-font-size-title;\n        /* 主层必须为相对定位,否则伪元素的图片将不符合预期 */\n        position: relative;\n        text {\n            z-index: 1;\n            font-size: 40px;\n            color: $uni-text-color-inverse;\n            font-family: '仓耳渔阳体 W05';\n        }\n    }\n    .new-game__view:before,\n    .observe__view:before,\n    .review__view:before {\n        width: 100%;\n        height: 100%;\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n        /* 插入空内容，必须要的样式 */\n        content: '';\n        /* 绝对定位，确保背景图起点在主层的0,0位置 */\n        position: absolute;\n        left: 0;\n        top: 0;\n        /*避免遮盖其他元素*/\n        z-index: 0;\n        -webkit-filter: opacity(38%); /*设置透明度   blur还可以改变照片的模糊度*/\n        filter: opacity(38%);\n    }\n    .new-game__view:before {\n        background-image: url('@/static/image/mode/new-game.jpg');\n    }\n    .observe__view:before {\n        background-image: url('@/static/image/mode/observe.jpg');\n    }\n    .review__view:before {\n        background-image: url('@/static/image/mode/review.jpg');\n    }\n}\n\n.popup_view {\n    width: 80%;\n    min-height: 200px;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    align-items: center;\n    justify-content: center;\n}\n</style>\n","import mod from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select.vue?vue&type=style&index=0&id=c71aca02&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select.vue?vue&type=style&index=0&id=c71aca02&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1730963221425\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}